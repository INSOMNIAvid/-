<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–ø–ª–∞—Ç–∞ 1 TON - –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
        }
        
        .payment-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .payment-section {
                grid-template-columns: 1fr;
            }
        }
        
        .payment-card {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid #e9ecef;
            text-align: center;
        }
        
        .payment-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .payment-card p {
            color: #6c757d;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .amount {
            font-size: 2.5em;
            font-weight: bold;
            color: #28a745;
            margin: 15px 0;
        }
        
        .button {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 0;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.4);
        }
        
        .button-success {
            background: linear-gradient(135deg, #28a745, #218838);
        }
        
        .button-success:hover {
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }
        
        .button-danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
        }
        
        .status {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .status-success {
            background: rgba(40, 167, 69, 0.2);
            border: 2px solid #28a745;
            color: #155724;
        }
        
        .status-error {
            background: rgba(220, 53, 69, 0.2);
            border: 2px solid #dc3545;
            color: #721c24;
        }
        
        .status-info {
            background: rgba(23, 162, 184, 0.2);
            border: 2px solid #17a2b8;
            color: #0c5460;
        }
        
        .wallet-info {
            background: rgba(248, 249, 250, 0.8);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #007bff;
        }
        
        .wallet-address {
            background: rgba(0, 0, 0, 0.05);
            padding: 15px;
            border-radius: 8px;
            word-break: break-all;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
        }
        
        .manual-payment {
            background: rgba(255, 193, 7, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px dashed #ffc107;
        }
        
        .transaction-history {
            margin-top: 30px;
            padding: 20px;
            background: rgba(248, 249, 250, 0.8);
            border-radius: 10px;
        }
        
        .transaction-item {
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .transaction-item:last-child {
            border-bottom: none;
        }
        
        .badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .badge-success {
            background: #d4edda;
            color: #155724;
        }
        
        .badge-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .badge-failed {
            background: #f8d7da;
            color: #721c24;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
            color: #6c757d;
        }
        
        #ton-connect {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üíé TON Payment System</h1>
            <p class="subtitle">–ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ –ø–ª–∞—Ç–µ–∂–∏ –≤ TON –ª–µ–≥–∫–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ</p>
        </header>

        <div id="ton-connect"></div>

        <div id="wallet-info" class="wallet-info" style="display: none;">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ—à–µ–ª—å–∫–µ</h3>
            <p><strong>–ê–¥—Ä–µ—Å:</strong> <span id="wallet-address"></span></p>
            <p><strong>–ë–∞–ª–∞–Ω—Å:</strong> <span id="wallet-balance"></span> TON</p>
            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="wallet-status"></span></p>
            <button id="disconnect-btn" class="button button-danger">–û—Ç–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫</button>
        </div>

        <div class="payment-section">
            <div class="payment-card">
                <h3>üöÄ –ë—ã—Å—Ç—Ä–∞—è –æ–ø–ª–∞—Ç–∞</h3>
                <p>–û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ TON Connect –≤ –æ–¥–∏–Ω –∫–ª–∏–∫</p>
                <div class="amount">1 TON</div>
                <button id="ton-connect-pay" class="button" disabled>–û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ TON Connect</button>
            </div>

            <div class="payment-card">
                <h3>üì® –†—É—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞</h3>
                <p>–û—Ç–ø—Ä–∞–≤—å—Ç–µ TON –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å</p>
                <div class="amount">1 TON</div>
                <button id="manual-pay-btn" class="button button-success">–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã</button>
            </div>
        </div>

        <div id="manual-payment" class="manual-payment" style="display: none;">
            <h3>üìã –†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã</h3>
            <p>–û—Ç–ø—Ä–∞–≤—å—Ç–µ <strong>1 TON</strong> –Ω–∞ –∞–¥—Ä–µ—Å:</p>
            <div class="wallet-address" id="payment-address">UQApupz4Ue6GqzKSfTe1jX8eJ3V8_HYekgaiwC-bNYnMLmEN</div>
            <p>–í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —É–∫–∞–∂–∏—Ç–µ: <strong id="payment-comment"></strong></p>
            <button id="check-payment" class="button">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É</button>
            <button id="copy-address" class="button">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å</button>
        </div>

        <div id="payment-status" class="status" style="display: none;"></div>

        <div class="transaction-history">
            <h3>üìä –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h3>
            <div id="transactions-list">
                <p style="text-align: center; color: #6c757d;">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
            </div>
        </div>

        <footer>
            <p>TON Payment System v1.0 &copy; 2024</p>
            <p>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –≤ —Å–µ—Ç–∏ TON</p>
        </footer>
    </div>

    <script>
        // ===== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø =====
        const CONFIG = {
            TON_API_URL: 'https://toncenter.com/api/v2',
            WALLET_ADDRESS: 'UQApupz4Ue6GqzKSfTe1jX8eJ3V8_HYekgaiwC-bNYnMLmEN',
            AMOUNT: 1, // 1 TON
            CHECK_INTERVAL: 30000, // 30 —Å–µ–∫—É–Ω–¥
            MANIFEST_URL: 'https://insomniavid.github.io/-/tonconnect-manifest.json'
        };

        // ===== –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====
        let tonConnectUI;
        let paymentCheckInterval;
        let currentPaymentId = '';

        // ===== –≠–õ–ï–ú–ï–ù–¢–´ DOM =====
        const elements = {
            walletInfo: document.getElementById('wallet-info'),
            walletAddress: document.getElementById('wallet-address'),
            walletBalance: document.getElementById('wallet-balance'),
            walletStatus: document.getElementById('wallet-status'),
            disconnectBtn: document.getElementById('disconnect-btn'),
            tonConnectPay: document.getElementById('ton-connect-pay'),
            manualPayBtn: document.getElementById('manual-pay-btn'),
            manualPayment: document.getElementById('manual-payment'),
            paymentAddress: document.getElementById('payment-address'),
            paymentComment: document.getElementById('payment-comment'),
            checkPayment: document.getElementById('check-payment'),
            copyAddress: document.getElementById('copy-address'),
            paymentStatus: document.getElementById('payment-status'),
            transactionsList: document.getElementById('transactions-list')
        };

        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TON CONNECT =====
        function initTonConnect() {
            try {
                tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
                    manifestUrl: CONFIG.MANIFEST_URL,
                    buttonRootId: 'ton-connect'
                });

                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
                tonConnectUI.connectionRestored.then(() => {
                    updateWalletInfo();
                });

                // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
                tonConnectUI.onStatusChange(wallet => {
                    updateWalletInfo(wallet);
                });

            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ TON Connect: ' + error.message);
            }
        }

        // ===== –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–§–û–†–ú–ê–¶–ò–ò –û –ö–û–®–ï–õ–¨–ö–ï =====
        function updateWalletInfo(wallet = null) {
            if (!wallet) {
                wallet = tonConnectUI?.wallet;
            }

            if (wallet) {
                elements.walletInfo.style.display = 'block';
                elements.walletAddress.textContent = wallet.account.address;
                elements.walletStatus.textContent = wallet.device.appName;
                elements.tonConnectPay.disabled = false;

                // –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
                getBalance(wallet.account.address).then(balance => {
                    elements.walletBalance.textContent = balance;
                });

            } else {
                elements.walletInfo.style.display = 'none';
                elements.tonConnectPay.disabled = true;
            }
        }

        // ===== –ü–û–õ–£–ß–ï–ù–ò–ï –ë–ê–õ–ê–ù–°–ê =====
        async function getBalance(address) {
            try {
                const response = await fetch(`${CONFIG.TON_API_URL}/getAddressInformation?address=${address}`);
                const data = await response.json();
                return (data.result.balance / 1000000000).toFixed(4);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞:', error);
                return 'N/A';
            }
        }

        // ===== –ì–ï–ù–ï–†–ê–¶–ò–Ø ID –ü–õ–ê–¢–ï–ñ–ê =====
        function generatePaymentId() {
            return 'pay_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
        }

        // ===== –ü–û–ö–ê–ó –°–¢–ê–¢–£–°–ê =====
        function showStatus(message, type = 'info') {
            elements.paymentStatus.style.display = 'block';
            elements.paymentStatus.className = `status status-${type}`;
            elements.paymentStatus.innerHTML = message;
            
            // –ê–≤—Ç–æ—Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            if (type !== 'info') {
                setTimeout(() => {
                    elements.paymentStatus.style.display = 'none';
                }, 5000);
            }
        }

        // ===== –û–¢–ü–†–ê–í–ö–ê –¢–†–ê–ù–ó–ê–ö–¶–ò–ò –ß–ï–†–ï–ó TON CONNECT =====
        async function sendTonConnectPayment() {
            try {
                showStatus('üîÑ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏...', 'info');
                
                const transaction = {
                    validUntil: Math.floor(Date.now() / 1000) + 300,
                    messages: [
                        {
                            address: CONFIG.WALLET_ADDRESS,
                            amount: (CONFIG.AMOUNT * 1000000000).toString(),
                            payload: currentPaymentId
                        }
                    ]
                };

                const result = await tonConnectUI.sendTransaction(transaction);
                
                showStatus('‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è...', 'success');
                addTransactionToHistory(currentPaymentId, CONFIG.AMOUNT, 'pending');
                
                // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∞—Ç—É—Å–∞
                startPaymentChecking();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:', error);
                showStatus('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: ' + error.message, 'error');
            }
        }

        // ===== –†–£–ß–ù–ê–Ø –û–ü–õ–ê–¢–ê =====
        function setupManualPayment() {
            currentPaymentId = generatePaymentId();
            elements.paymentComment.textContent = currentPaymentId;
            elements.manualPayment.style.display = 'block';
            showStatus('üìß –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –æ–ø–ª–∞—Ç—ã', 'info');
        }

        // ===== –ü–†–û–í–ï–†–ö–ê –ü–õ–ê–¢–ï–ñ–ê =====
        async function checkPayment() {
            try {
                showStatus('üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞...', 'info');
                
                // –≠–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–∞—Ç–µ–∂–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ç–∫–µ–Ω–¥)
                const paid = Math.random() > 0.7; // 30% —à–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –¥–ª—è –¥–µ–º–æ
                
                if (paid) {
                    showStatus('‚úÖ –ü–ª–∞—Ç–µ–∂ –ø–æ–ª—É—á–µ–Ω! –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É!', 'success');
                    updateTransactionStatus(currentPaymentId, 'completed');
                    stopPaymentChecking();
                } else {
                    showStatus('‚è≥ –ü–ª–∞—Ç–µ–∂ –µ—â–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–∑–∂–µ.', 'info');
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–∞—Ç–µ–∂–∞:', error);
                showStatus('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–∞—Ç–µ–∂–∞', 'error');
            }
        }

        // ===== –ó–ê–ü–£–°–ö –ü–†–û–í–ï–†–ö–ò –ü–õ–ê–¢–ï–ñ–ê =====
        function startPaymentChecking() {
            stopPaymentChecking();
            paymentCheckInterval = setInterval(checkPayment, CONFIG.CHECK_INTERVAL);
        }

        // ===== –û–°–¢–ê–ù–û–í–ö–ê –ü–†–û–í–ï–†–ö–ò –ü–õ–ê–¢–ï–ñ–ê =====
        function stopPaymentChecking() {
            if (paymentCheckInterval) {
                clearInterval(paymentCheckInterval);
                paymentCheckInterval = null;
            }
        }

        // ===== –î–û–ë–ê–í–õ–ï–ù–ò–ï –¢–†–ê–ù–ó–ê–ö–¶–ò–ò –í –ò–°–¢–û–†–ò–Æ =====
        function addTransactionToHistory(id, amount, status) {
            const transactionItem = document.createElement('div');
            transactionItem.className = 'transaction-item';
            transactionItem.innerHTML = `
                <div>
                    <strong>${id}</strong><br>
                    <small>${new Date().toLocaleString()}</small>
                </div>
                <div>
                    <span class="badge badge-${status}">${getStatusText(status)}</span><br>
                    <strong>${amount} TON</strong>
                </div>
            `;
            elements.transactionsList.appendChild(transactionItem);
        }

        // ===== –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–¢–ê–¢–£–°–ê –¢–†–ê–ù–ó–ê–ö–¶–ò–ò =====
        function updateTransactionStatus(id, status) {
            const transactions = elements.transactionsList.querySelectorAll('.transaction-item');
            transactions.forEach(item => {
                if (item.textContent.includes(id)) {
                    const badge = item.querySelector('.badge');
                    if (badge) {
                        badge.className = `badge badge-${status}`;
                        badge.textContent = getStatusText(status);
                    }
                }
            });
        }

        // ===== –¢–ï–ö–°–¢ –°–¢–ê–¢–£–°–ê =====
        function getStatusText(status) {
            const statuses = {
                'pending': '–û–∂–∏–¥–∞–Ω–∏–µ',
                'completed': '–£—Å–ø–µ—à–Ω–æ',
                'failed': '–û—à–∏–±–∫–∞'
            };
            return statuses[status] || status;
        }

        // ===== –ö–û–ü–ò–†–û–í–ê–ù–ò–ï –ê–î–†–ï–°–ê =====
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showStatus('‚úÖ –ê–¥—Ä–µ—Å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞', 'success');
            }).catch(err => {
                showStatus('‚ùå –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è', 'error');
            });
        }

        // ===== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô =====
        function setupEventListeners() {
            // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
            elements.disconnectBtn.addEventListener('click', () => {
                if (tonConnectUI) {
                    tonConnectUI.disconnect();
                    showStatus('üîå –ö–æ—à–µ–ª–µ–∫ –æ—Ç–∫–ª—é—á–µ–Ω', 'info');
                }
            });

            // TON Connect –æ–ø–ª–∞—Ç–∞
            elements.tonConnectPay.addEventListener('click', sendTonConnectPayment);

            // –†—É—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞
            elements.manualPayBtn.addEventListener('click', setupManualPayment);

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
            elements.checkPayment.addEventListener('click', checkPayment);

            // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞
            elements.copyAddress.addEventListener('click', () => {
                copyToClipboard(CONFIG.WALLET_ADDRESS);
            });
        }

        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø =====
        function initApp() {
            initTonConnect();
            setupEventListeners();
            console.log('TON Payment System initialized');
        }

        // ===== –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø =====
        document.addEventListener('DOMContentLoaded', initApp);

        // ===== –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö =====
        window.addEventListener('error', (e) => {
            console.error('Global error:', e.error);
            showStatus('‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è', 'error');
        });

        // ===== –°–û–•–†–ê–ù–ï–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–Ø =====
        function saveState() {
            const state = {
                transactions: Array.from(elements.transactionsList.children).map(child => child.innerHTML)
            };
            localStorage.setItem('ton_payment_state', JSON.stringify(state));
        }

        function loadState() {
            const saved = localStorage.getItem('ton_payment_state');
            if (saved) {
                const state = JSON.parse(saved);
                state.transactions.forEach(html => {
                    const div = document.createElement('div');
                    div.className = 'transaction-item';
                    div.innerHTML = html;
                    elements.transactionsList.appendChild(div);
                });
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        loadState();

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
        setInterval(saveState, 10000);
    </script>
</body>
</html>
